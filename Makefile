COMPILATION_FLAGS=-std=c18 -D_POSIX_C_SOURCE=200809L -D_XOPEN_SOURCE=700 -D_DEFAULT_SOURCE -D_DARWIN_C_SOURCE -D_GNU_SOURCE -D__BSD_VISIBLE -Werror
SUPPORTED_FLAGS=-pedantic-errors -Waddress -Waggregate-return -Wall -Walloca -Warray-bounds -Wbad-function-cast -Wbool-operation -Wcast-align -Wcast-function-type -Wcast-qual -Wchar-subscripts -Wcomment -Wconversion -Wdangling-else -Wdate-time -Wdeclaration-after-statement -Wdisabled-optimization -Wdouble-promotion -Wempty-body -Wenum-compare -Wenum-conversion -Wexpansion-to-defined -Wextra -Wfatal-errors -Wfloat-conversion -Wfloat-equal -Wformat -Wformat-security -Wformat-y2k -Wformat=2 -Wframe-address -Wignored-qualifiers -Wimplicit -Wimplicit-fallthrough -Winfinite-recursion -Winit-self -Winline -Wint-in-bool-context -Winvalid-pch -Wlogical-not-parentheses -Wmain -Wmemset-transposed-args -Wmisleading-indentation -Wmissing-braces -Wmissing-declarations -Wmissing-field-initializers -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wmissing-prototypes -Wmissing-variable-declarations -Wnested-externs -Wnull-dereference -Wold-style-definition -Woverlength-strings -Wpacked -Wparentheses -Wpedantic -Wpointer-arith -Wpointer-sign -Wredundant-decls -Wreturn-type -Wsequence-point -Wshadow -Wshift-negative-value -Wsign-compare -Wsign-conversion -Wsizeof-array-div -Wsizeof-pointer-div -Wsizeof-pointer-memaccess -Wstack-protector -Wstrict-aliasing -Wstrict-prototypes -Wstring-compare -Wswitch -Wswitch-default -Wswitch-enum -Wtautological-compare -Wtrigraphs -Wtype-limits -Wundef -Wuninitialized -Wunknown-pragmas -Wunused -Wunused-but-set-parameter -Wunused-but-set-variable -Wunused-const-variable -Wunused-function -Wunused-label -Wunused-local-typedefs -Wunused-macros -Wunused-parameter -Wunused-value -Wunused-variable -Wvariadic-macros -Wvla -Wvolatile-register-var -Wwrite-strings -Wxor-used-as-pow -Wc++-compat -W -Wabsolute-value -Waddress-of-packed-member -Waddress-of-temporary -Waix-compat -Walign-mismatch -Walloca-with-align-alignof -Wambiguous-ellipsis -Wambiguous-macro -Wambiguous-member-template -Wambiguous-reversed-operator -Wanalyzer-incompatible-plugin -Wanon-enum-enum-conversion -Wanonymous-pack-parens -Warc -Warc-bridge-casts-disallowed-in-nonarc -Warc-maybe-repeated-use-of-weak -Warc-non-pod-memaccess -Warc-performSelector-leaks -Warc-repeated-use-of-weak -Warc-retain-cycles -Warc-unsafe-retained-assign -Wargument-outside-range -Wargument-undefined-behaviour -Warray-bounds-pointer-arithmetic -Wasm -Wasm-operand-widths -Wassign-enum -Wassume -Wat-protocol -Watimport-in-framework-header -Watomic-alignment -Watomic-implicit-seq-cst -Watomic-memory-ordering -Watomic-properties -Watomic-property-with-user-defined-accessor -Wattribute-packed-for-bitfield -Wattribute-warning -Wattributes -Wauto-disable-vptr-sanitizer -Wauto-import -Wauto-storage-class -Wauto-var-id -Wavailability -Wavr-rtlib-linking-quirks -Wbackend-plugin -Wbackslash-newline-escape -Wbinary-literal -Wbind-to-temporary-copy -Wbinding-in-condition -Wbitfield-constant-conversion -Wbitfield-enum-conversion -Wbitfield-width -Wbitwise-conditional-parentheses -Wbitwise-instead-of-logical -Wbitwise-op-parentheses -Wblock-capture-autoreleasing -Wbool-conversion -Wbool-conversions -Wbool-operation -Wbraced-scalar-init -Wbridge-cast -Wbuiltin-assume-aligned-alignment -Wbuiltin-macro-redefined -Wbuiltin-memcpy-chk-size -Wbuiltin-requires-header -Wc11-extensions -Wc2x-extensions -Wc99-compat -Wc99-designator -Wc99-extensions -Wcalled-once-parameter -Wcast-calling-convention -Wcast-of-sel-type -Wcast-qual-unrelated -WCFString-literal -Wchar-align -WCL4 -Wclang-cl-pch -Wclass-varargs -Wcmse-union-leak -Wcomma -Wcomments -Wcompletion-handler -Wcomplex-component-init -Wcompound-token-split -Wcompound-token-split-by-macro -Wcompound-token-split-by-space -Wconditional-type-mismatch -Wconditional-uninitialized -Wconfig-macros -Wconstant-conversion -Wconstant-evaluated -Wconstant-logical-operand -Wconstexpr-not-const -Wconsumed -Wcoroutine -Wcoroutine-missing-unhandled-exception -Wcovered-switch-default -Wcpp -Wcstring-format-directive -Wctu -Wcuda-compat -Wcustom-atomic-properties -Wcxx-attribute-extension -Wdangling -Wdangling-field -Wdangling-gsl -Wdangling-initializer-list -Wdealloc-in-category -Wdebug-compression-unavailable -Wdefaulted-function-deleted -Wdelegating-ctor-cycles -Wdelimited-escape-sequence-extension -Wdeprecated -Wdeprecated-altivec-src-compat -Wdeprecated-anon-enum-enum-conversion -Wdeprecated-array-compare -Wdeprecated-attributes -Wdeprecated-comma-subscript -Wdeprecated-declarations -Wdeprecated-dynamic-exception-spec -Wdeprecated-enum-compare -Wdeprecated-enum-compare-conditional -Wdeprecated-implementations -Wdeprecated-increment-bool -Wdeprecated-pragma -Wdeprecated-register -Wdeprecated-this-capture -Wdeprecated-volatile -Wdeprecated-writable-strings -Wdirect-ivar-access -Wdisabled-macro-expansion -Wdiscard-qual -Wdistributed-object-modifiers -Wdiv-by-zero -Wdivision-by-zero -Wdll-attribute-on-redeclaration -Wdllexport-explicit-instantiation-decl -Wdllimport-static-field-def -Wdocumentation -Wdocumentation-deprecated-sync -Wdocumentation-html -Wdocumentation-pedantic -Wdocumentation-unknown-command -Wdollar-in-identifier-extension -Wdtor-name -Wdtor-typedef -Wduplicate-decl-specifier -Wduplicate-enum -Wduplicate-method-arg -Wduplicate-method-match -Wduplicate-protocol -Wdynamic-class-memaccess -Wdynamic-exception-spec -Welaborated-enum-base -Welaborated-enum-class -Wembedded-directive -Wempty-decomposition -Wempty-init-stmt -Wempty-translation-unit -Wencode-type -Wendif-labels -Wenum-compare-conditional -Wenum-compare-switch -Wenum-enum-conversion -Wenum-float-conversion -Wenum-too-large -Wexcess-initializers -Wexit-time-destructors -Wexplicit-initialize-call -Wexplicit-ownership-type -Wexport-unnamed -Wextern-c-compat -Wextern-initializer -Wextra-qualification -Wextra-semi-stmt -Wextra-tokens -Wfinal-dtor-non-final-class -Wfinal-macro -Wfixed-enum-extension -Wfixed-point-overflow -Wflag-enum -Wflexible-array-extensions -Wfloat-overflow-conversion -Wfloat-zero-conversion -Wfor-loop-analysis -Wformat-extra-args -Wformat-insufficient-args -Wformat-invalid-specifier -Wformat-non-iso -Wformat-nonliteral -Wformat-pedantic -Wformat-type-confusion -Wformat-zero-length -Wfortify-source -Wfour-char-constants -Wframework-include-private-from-public -Wfree-nonheap-object -Wfunction-multiversion -Wfuse-ld-path -Wfuture-compat -Wgcc-compat -Wglobal-constructors -Wglobal-isel -Wgnu -Wgnu-alignof-expression -Wgnu-anonymous-struct -Wgnu-array-member-paren-init -Wgnu-auto-type -Wgnu-binary-literal -Wgnu-case-range -Wgnu-complex-integer -Wgnu-compound-literal-initializer -Wgnu-conditional-omitted-operand -Wgnu-designator -Wgnu-empty-initializer -Wgnu-empty-struct -Wgnu-flexible-array-initializer -Wgnu-flexible-array-union-member -Wgnu-folding-constant -Wgnu-imaginary-constant -Wgnu-include-next -Wgnu-inline-cpp-without-extern -Wgnu-label-as-value -Wgnu-redeclared-enum -Wgnu-statement-expression -Wgnu-static-float-init -Wgnu-string-literal-operator-template -Wgnu-union-cast -Wgnu-variable-sized-type-not-at-end -Wgnu-zero-line-directive -Wgnu-zero-variadic-macro-arguments -Wgpu-maybe-wrong-side -Wheader-guard -Wheader-hygiene -Whip-only -Widiomatic-parentheses -Wignored-attributes -Wignored-availability-without-sdk-settings -Wignored-optimization-argument -Wignored-pragma-intrinsic -Wignored-pragma-optimize -Wignored-pragmas -Wignored-reference-qualifiers -Wimplicit-atomic-properties -Wimplicit-const-int-float-conversion -Wimplicit-conversion-floating-point-to-bool -Wimplicit-exception-spec-mismatch -Wimplicit-fallthrough-per-function -Wimplicit-fixed-point-conversion -Wimplicit-float-conversion -Wimplicit-function-declaration -Wimplicit-int -Wimplicit-int-conversion -Wimplicit-int-float-conversion -Wimplicit-retain-self -Wimplicitly-unsigned-literal -Wimport -Wimport-preprocessor-directive-pedantic -Winclude-next-absolute-path -Winclude-next-outside-header -Wincompatible-exception-spec -Wincompatible-function-pointer-types -Wincompatible-library-redeclaration -Wincompatible-ms-struct -Wincompatible-pointer-types -Wincompatible-pointer-types-discards-qualifiers -Wincompatible-property-type -Wincompatible-sysroot -Wincomplete-framework-module-declaration -Wincomplete-implementation -Wincomplete-module -Wincomplete-setjmp-declaration -Wincomplete-umbrella -Winconsistent-dllimport -Winconsistent-missing-destructor-override -Winconsistent-missing-override -Wincrement-bool -WIndependentClass-attribute -Winitializer-overrides -Winjected-class-name -Winline-asm -Winline-namespace-reopened-noninline -Winline-new-delete -Winstantiation-after-specialization -Wint-conversion -Wint-conversions -Wint-to-pointer-cast -Wint-to-void-pointer-cast -Winteger-overflow -Winvalid-command-line-argument -Winvalid-constexpr -Winvalid-iboutlet -Winvalid-initializer-from-system-header -Winvalid-ios-deployment-target -Winvalid-no-builtin-names -Winvalid-noreturn -Winvalid-or-nonexistent-directory -Winvalid-partial-specialization -Winvalid-pp-token -Winvalid-source-encoding -Winvalid-token-paste -Wjump-seh-finally -Wkeyword-compat -Wkeyword-macro -Wknr-promoted-parameter -Wlanguage-extension-token -Wlarge-by-value-copy -Wliblto -Wlinker-warnings -Wliteral-conversion -Wliteral-range -Wlocal-type-template-args -Wlogical-op-parentheses -Wloop-analysis -Wmacro-redefined -Wmain-return-type -Wmalformed-warning-check -Wmany-braces-around-scalar-init -Wmax-tokens -Wmax-unsigned-zero -Wmemsize-comparison -Wmethod-signatures -Wmismatched-parameter-types -Wmismatched-return-types -Wmissing-constinit -Wmissing-exception-spec -Wmissing-method-return-type -Wmissing-noescape -Wmissing-noreturn -Wmissing-prototype-for-cc -Wmissing-selector-name -Wmissing-sysroot -Wmisspelled-assumption -Wmodule-conflict -Wmodule-file-config-mismatch -Wmodule-file-extension -Wmodule-import-in-extern-c -Wmodules-ambiguous-internal-linkage -Wmodules-import-nested-redundant -Wmost -Wmove -Wmsvc-include -Wmsvc-not-found -Wmultichar -Wmultiple-move-vbase -Wnarrowing -Wnested-anon-types -Wnew-returns-null -Wnewline-eof -Wnsconsumed-mismatch -WNSObject-attribute -Wnsreturns-mismatch -Wnull-arithmetic -Wnull-character -Wnull-conversion -Wnull-pointer-arithmetic -Wnull-pointer-subtraction -Wnullability -Wnullability-completeness -Wnullability-completeness-on-arrays -Wnullability-declspec -Wnullability-extension -Wnullability-inferred-on-nested-type -Wnullable-to-nonnull-conversion -Wodr -Wopencl-unsupported-rgba -Wopenmp -Wopenmp-51-extensions -Wopenmp-clauses -Wopenmp-loop-form -Wopenmp-mapping -Wopenmp-target -Woption-ignored -Wordered-compare-function-pointers -Wout-of-line-declaration -Wout-of-scope-function -Wover-aligned -Woverflow -Woverloaded-shift-op-parentheses -Woverride-init -Woverride-module -Woverriding-method-mismatch -Wparentheses-equality -Wpartial-availability -Wpass-failed -Wpch-date-time -Wpedantic-core-features -Wpedantic-macros -Wpointer-bool-conversion -Wpointer-compare -Wpointer-integer-compare -Wpointer-to-enum-cast -Wpointer-to-int-cast -Wpointer-type-mismatch -Wpotentially-direct-selector -Wpotentially-evaluated-expression -Wpragma-clang-attribute -Wpragma-once-outside-header -Wpragma-pack -Wpragma-pack-suspicious-include -Wpragma-system-header-outside-header -Wpragmas -Wpre-c2x-compat -Wpre-c2x-compat-pedantic -Wpre-openmp-51-compat -Wpredefined-identifier-outside-function -Wprivate-extern -Wprivate-header -Wprivate-module -Wprofile-instr-missing -Wprofile-instr-out-of-date -Wprofile-instr-unprofiled -Wproperty-access-dot-syntax -Wproperty-attribute-mismatch -Wprotocol-property-synthesis-ambiguity -Wpsabi -Wqualified-void-return-type -Wquoted-include-in-framework-header -Wrange-loop-analysis -Wrange-loop-bind-reference -Wreadonly-iboutlet-property -Wreceiver-expr -Wreceiver-forward-class -Wredeclared-class-member -Wredundant-consteval-if -Wredundant-parens -Wreinterpret-base-class -Wreorder-ctor -Wreorder-init-list -Wrequires-super-attribute -Wreserved-id-macro -Wreserved-identifier -Wreserved-macro-identifier -Wreserved-user-defined-literal -Wrestrict-expansion -Wretained-language-linkage -Wreturn-stack-address -Wreturn-std-move -Wreturn-type-c-linkage -Wrewrite-not-bool -Wrtti -Wsection -Wselector-type-mismatch -Wself-assign -Wself-assign-field -Wself-assign-overloaded -Wself-move -Wsemicolon-before-method-body -Wsentinel -Wserialized-diagnostics -Wshadow-all -Wshadow-field -Wshadow-field-in-constructor -Wshadow-field-in-constructor-modified -Wshadow-uncaptured-local -Wshift-count-negative -Wshift-count-overflow -Wshift-op-parentheses -Wshift-overflow -Wshift-sign-overflow -Wshorten-64-to-32 -Wsigned-enum-bitfield -Wsigned-unsigned-wchar -Wsizeof-array-argument -Wsizeof-array-decay -Wslash-u-filename -Wslh-asm-goto -Wsometimes-uninitialized -Wsource-mgr -Wsource-uses-openmp -Wspir-compat -Wstack-exhausted -Wstatic-float-init -Wstatic-in-inline -Wstatic-inline-explicit-instantiation -Wstatic-local-in-inline -Wstatic-self-init -Wstdlibcxx-not-found -Wstrict-potentially-direct-selector -Wstring-concatenation -Wstring-conversion -Wstring-plus-char -Wstring-plus-int -Wstrlcpy-strlcat-size -Wstrncat-size -Wsuggest-destructor-override -Wsuper-class-method-mismatch -Wsuspicious-bzero -Wsuspicious-memaccess -Wswift-name-attribute -Wswitch-bool -Wsync-fetch-and-nand-semantics-changed -Wtautological-bitwise-compare -Wtautological-constant-compare -Wtautological-constant-in-range-compare -Wtautological-constant-out-of-range-compare -Wtautological-overlap-compare -Wtautological-pointer-compare -Wtautological-type-limit-compare -Wtautological-undefined-compare -Wtautological-unsigned-char-zero-compare -Wtautological-unsigned-enum-zero-compare -Wtautological-unsigned-zero-compare -Wtautological-value-range-compare -Wtcb-enforcement -Wtentative-definition-incomplete-type -Wthread-safety -Wthread-safety-analysis -Wthread-safety-attributes -Wthread-safety-beta -Wthread-safety-negative -Wthread-safety-precise -Wthread-safety-reference -Wthread-safety-verbose -Wtype-safety -Wtypedef-redefinition -Wtypename-missing -Wunable-to-open-stats-file -Wunavailable-declarations -Wundef-prefix -Wundefined-bool-conversion -Wundefined-func-template -Wundefined-inline -Wundefined-internal -Wundefined-internal-type -Wundefined-reinterpret-cast -Wundefined-var-template -Wunderaligned-exception-object -Wunevaluated-expression -Wunguarded-availability -Wunguarded-availability-new -Wunicode -Wunicode-homoglyph -Wunicode-whitespace -Wunicode-zero-width -Wuninitialized-const-reference -Wunknown-argument -Wunknown-assumption -Wunknown-attributes -Wunknown-cuda-version -Wunknown-escape-sequence -Wunknown-sanitizers -Wno-unknown-warning-option -Wunnamed-type-template-args -Wunneeded-internal-declaration -Wunneeded-member-function -Wunreachable-code -Wunreachable-code-aggressive -Wunreachable-code-break -Wunreachable-code-fallthrough -Wunreachable-code-loop-increment -Wunreachable-code-return -Wunsequenced -Wunsupported-abs -Wunsupported-availability-guard -Wunsupported-cb -Wunsupported-dll-base-class-template -Wunsupported-floating-point-opt -Wunsupported-friend -Wunsupported-gpopt -Wunsupported-nan -Wunsupported-target-opt -Wunsupported-visibility -Wunusable-partial-specialization -Wunused-argument -Wunused-command-line-argument -Wunused-comparison -Wunused-exception-parameter -Wunused-getter-return-value -Wunused-lambda-capture -Wunused-local-typedef -Wunused-member-function -Wunused-private-field -Wunused-property-ivar -Wunused-result -Wunused-template -Wunused-volatile-lvalue -Wused-but-marked-unused -Wuser-defined-literals -Wuser-defined-warnings -Wvarargs -Wvec-elem-size -Wvector-conversion -Wvector-conversions -Wvisibility -Wvla-extension -Wvoid-pointer-to-enum-cast -Wvoid-pointer-to-int-cast -Wvoid-ptr-dereference -Wvolatile-register-var -Wwasm-exception-spec -Wweak-template-vtables -Wweak-vtables -Wwritable-strings -Wzero-length-array -Wc++-compat -Wabi -g3 -ggdb -gcolumn-info
SUPPORTED_SANITIZER_FLAGS=-fsanitize=address -fsanitize=pointer-compare -fsanitize=pointer-subtract -fsanitize=undefined -fsanitize=shift -fsanitize=shift-exponent -fsanitize=shift-base -fsanitize=integer-divide-by-zero -fsanitize=unreachable -fsanitize=vla-bound -fsanitize=null -fsanitize=signed-integer-overflow -fsanitize=bounds -fsanitize=alignment -fsanitize=float-divide-by-zero -fsanitize=float-cast-overflow -fsanitize=nonnull-attribute -fsanitize=returns-nonnull-attribute -fsanitize=bool -fsanitize=enum -fsanitize=pointer-overflow -fsanitize=builtin -fstack-protector-all -fno-delete-null-pointer-checks -fno-omit-frame-pointer
LIBRARIES=
PROGRAMS=
server: server.c
	$(CC) $(COMPILATION_FLAGS) $(CFLAGS) $(SUPPORTED_FLAGS) $(SUPPORTED_SANITIZER_FLAGS) -o server server.c $(LIBRARIES)
PROGRAMS += server
server-traceable: server.c
	$(CC) $(COMPILATION_FLAGS) $(CFLAGS) $(SUPPORTED_FLAGS) -o server-traceable server.c $(LIBRARIES)
PROGRAMS += server-traceable
client: client.c
	$(CC) $(COMPILATION_FLAGS) $(CFLAGS) $(SUPPORTED_FLAGS) $(SUPPORTED_SANITIZER_FLAGS) -o client client.c $(LIBRARIES)
PROGRAMS += client
client-traceable: client.c
	$(CC) $(COMPILATION_FLAGS) $(CFLAGS) $(SUPPORTED_FLAGS) -o client-traceable client.c $(LIBRARIES)
PROGRAMS += client-traceable

clean:
	rm -f $(PROGRAMS) $(LIBS)

all: $(PROGRAMS) $(LIBS)
